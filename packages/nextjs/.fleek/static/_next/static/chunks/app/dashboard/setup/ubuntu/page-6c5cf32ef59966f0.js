(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8377],{19004:function(e,s,t){Promise.resolve().then(t.bind(t,58327))},58327:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return A}});var a=t(57437),l=t(2265),r=t(27648),n=t(16593),c=t(15488);let i=()=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"h-8 w-16 bg-gray-200 rounded"},e))})]}),(0,a.jsx)("div",{className:"h-[400px] bg-gray-50 rounded p-4",children:[...Array(8)].map((e,s)=>(0,a.jsxs)("div",{className:"mb-2 flex items-center",children:[(0,a.jsx)("div",{className:"h-6 w-16 bg-gray-200 rounded mr-2"}),(0,a.jsx)("div",{className:"h-6 w-full bg-gray-200 rounded"})]},s))})]});function o(e){let{url:s,title:t}=e,[r,o]=(0,l.useState)([]),[d,m]=(0,l.useState)("all"),x=(0,l.useRef)(null),{data:h,isLoading:u,error:g,isError:p}=(0,n.a)({queryKey:["logs",s],queryFn:async()=>{let e=localStorage.getItem(c.s6)||"",t=await fetch(s+"?directory="+e);if(!t.ok)throw Error((await t.json()).message||"Failed to fetch metrics");return t.json()},refetchInterval:1e4});(0,l.useEffect)(()=>{if(h){if(h.logs&&Array.isArray(h.logs)){let e=h.logs.map(e=>{let s=e.match(/INFO|WARN|ERROR|DEBG|CRIT|TRACE/);return{level:s?s[0].toLowerCase():"info",message:e.replace((null==s?void 0:s[0])||"","").trim()}});o(s=>[...s,...e])}x.current&&(x.current.scrollTop=x.current.scrollHeight)}},[h,p,g]);let j=r.filter(e=>"all"===d||e.level===d);return u?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 w-full",children:(0,a.jsx)(i,{})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:t}),(0,a.jsx)("div",{className:"flex space-x-2",children:["all","info","warn","error"].map(e=>(0,a.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 rounded transition-colors duration-200 ".concat(d===e?"bg-indigo-100 text-indigo-800":"bg-gray-100 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),g&&(0,a.jsx)("div",{className:"text-red-600 mb-4 p-3 bg-red-50 rounded-md",children:g.message}),(0,a.jsx)("div",{ref:x,className:"h-[400px] overflow-y-auto overflow-x-hidden bg-gray-50 rounded p-4 font-mono text-sm",children:j.map((e,s)=>(0,a.jsxs)("div",{className:"mb-2 p-2 whitespace-pre-wrap break-all rounded transition-colors duration-200 ".concat("error"===e.level?"bg-red-50 text-red-800":"warn"===e.level?"bg-yellow-50 text-yellow-800":"bg-blue-50 text-blue-800"),children:[(0,a.jsx)("span",{className:"font-bold capitalize",children:e.level}),(0,a.jsx)("span",{className:"mx-2",children:"|"}),(0,a.jsx)("span",{children:e.message})]},s))})]})}var d=t(47625),m=t(58336),x=t(56940),h=t(97059),u=t(62994),g=t(8147),p=t(54061);let j=()=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("div",{className:"h-7 w-48 bg-gray-200 rounded"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-200"}),(0,a.jsx)("div",{className:"h-5 w-16 bg-gray-200 rounded"})]})]}),(0,a.jsxs)("div",{className:"space-y-6 flex gap-3 flex-col md:flex-row md:items-end justify-center",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"h-6 w-24 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"w-full h-[200px] bg-gray-200 rounded"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"w-full h-[200px] bg-gray-200 rounded"})]})]})]});function f(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)("stopped"),{data:c,isLoading:i,error:o,isError:f}=(0,n.a)({queryKey:["metrics"],queryFn:async()=>{let e=await fetch("/api/ssh/metrics");if(!e.ok)throw Error((await e.json()).message||"Failed to fetch metrics");return e.json()},refetchInterval:8e3});return((0,l.useEffect)(()=>{c&&(r("running"),s(e=>[...e,c].slice(-30))),o&&r("error")},[c,f,o]),i)?(0,a.jsx)(j,{}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Node Status Monitor"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("running"===t?"bg-green-500":"error"===t?"bg-red-500":"bg-gray-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.charAt(0).toUpperCase()+t.slice(1)})]})]}),(0,a.jsxs)("div",{className:"space-y-6 flex gap-3 flex-col md:flex-row md:items-end justify-center",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"CPU Usage"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(d.h,{width:"100%",height:200,children:(0,a.jsxs)(m.w,{data:e,children:[(0,a.jsx)(x.q,{strokeDasharray:"3 3"}),(0,a.jsx)(h.K,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleTimeString()}),(0,a.jsx)(u.B,{}),(0,a.jsx)(g.u,{labelFormatter:e=>new Date(e).toLocaleString()}),(0,a.jsx)(p.x,{type:"monotone",dataKey:"cpu",stroke:"#4F46E5"})]})})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Memory Usage"}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(d.h,{width:"100%",height:200,children:(0,a.jsxs)(m.w,{data:e,children:[(0,a.jsx)(x.q,{strokeDasharray:"3 3"}),(0,a.jsx)(h.K,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleTimeString()}),(0,a.jsx)(u.B,{}),(0,a.jsx)(g.u,{labelFormatter:e=>new Date(e).toLocaleString()}),(0,a.jsx)(p.x,{type:"monotone",dataKey:"memory",stroke:"#2563EB"})]})})})]})]})]})}function b(e){let{output:s}=e,t=(0,l.useRef)(null),[r,n]=(0,l.useState)(""),[c,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),[m,x]=(0,l.useState)([s||"> Waiting for commands..."]);async function h(e){let s=await fetch("/api/ssh/execute",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({command:e})});if(!s.ok)throw Error((await s.json()).message||"Command execution failed");let{output:t}=await s.json();i(e=>"".concat(e,"\n").concat(t))}(0,l.useEffect)(()=>{s&&x(e=>[...e,s]),c&&x(e=>[...e,c])},[s,c]),(0,l.useEffect)(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[m]);let u=async e=>{if(!o){if("Enter"===e.key){if(e.preventDefault(),r.trim()){x(e=>[...e,"> ".concat(r)]),n(""),d(!0);try{await h(r)}catch(e){console.log("terminal error",e)}d(!1)}}else"Backspace"===e.key?(e.preventDefault(),n(e=>e.slice(0,-1))):" "===e.key?(e.preventDefault(),n(e=>e+" ")):1===e.key.length&&n(s=>s+e.key)}};return(0,a.jsx)("div",{className:"relative h-[600px] w-full",children:(0,a.jsxs)("div",{className:"absolute inset-0 bg-gray-900 rounded-lg p-3 overflow-y-auto overflow-x-hidden text-blue-400 font-mono text-sm whitespace-pre-wrap cursor-text",ref:t,tabIndex:0,onKeyDown:u,children:[m.map((e,s)=>(0,a.jsx)("div",{className:"break-words",children:e},s)),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-blue-400",children:"> "}),(0,a.jsx)("span",{className:"text-blue-300",children:r}),(0,a.jsx)("span",{className:"".concat(o?"ml-1 rotating-cursor":"blinking-cursor"),children:"|"})]})]})})}let N=e=>{let{activeSection:s}=e;return(0,a.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,a.jsx)("div",{className:"flex-1 p-4 overflow-auto",children:(0,a.jsxs)("div",{className:"h-full max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Linux Node Setup"}),(0,a.jsxs)("div",{className:"h-[calc(100%-6rem)]",children:["node-monitor"===s&&(0,a.jsx)(f,{}),"reth-logs"===s&&(0,a.jsx)(o,{title:"Reth Logs",url:"/api/ssh/logs/reth"}),"lighthouse-logs"===s&&(0,a.jsx)(o,{title:"Lighthouse Logs",url:"/api/ssh/logs/lighthouse"}),"terminal"===s&&(0,a.jsx)(b,{})]})]})})})};var v=t(99376),y=t(49089),w=t(62755),k=e=>{let{isOpen:s,onClose:t,title:l,steps:r,isCompleted:n}=e;return(0,a.jsxs)("dialog",{className:"modal ".concat(s?"modal-open":""),children:[(0,a.jsxs)("div",{className:"modal-box max-w-2xl bg-base-100 text-base-content",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-4 text-base-content",children:l}),(0,a.jsx)("div",{className:"mt-4",children:r.map((e,s)=>(0,a.jsx)(w.Z,{step:e},s))}),n&&(0,a.jsx)("div",{className:"modal-action",children:(0,a.jsx)("button",{className:"btn btn-primary",onClick:t,children:"Close"})})]}),(0,a.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,a.jsx)("button",{onClick:t,children:"Close"})})]})};let S=[{command:" cd $DIRECTORY && git pull",description:"Updating the codebase",status:"pending"},{command:"cd $DIRECTORY && yarn install",description:"Installing dependencies",status:"pending"},{command:"cd $DIRECTORY && pm2 restart all",description:"Restarting the service",status:"pending"}],C=[{command:"cd $DIRECTORY && pm2 restart all",description:"Restarting the service",status:"pending"}],R=[{command:"pm2 kill",description:"Stopping the service",status:"pending"}];var E=()=>{let[e,s]=(0,l.useState)(!1),[t,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),m=(0,v.useRouter)(),x=(e,s)=>{r(t=>t.map((t,a)=>a===e?{...t,...s}:t))},h=async e=>{d(!1);let s=localStorage.getItem(c.s6)||"~/buidlguidl-client",t=0;try{for(let a of e){x(t,{status:"running"});try{let e=await (0,c.P0)(a.command,s);x(t,{status:"completed",output:e.output})}catch(e){throw x(t,{status:"error",output:e instanceof Error?e.message:"Unknown error"}),e}t++}d(!0)}catch(e){console.error("Error during execution:",e),d(!0)}},u=e=>{let t,a;switch(e){case"update":t=[...S],a="Updating System";break;case"restart":t=[...C],a="Restarting Services";break;case"shutdown":t=[...R],a="Shutting Down",localStorage.removeItem(c.Iy),localStorage.removeItem(c.Bm),setTimeout(()=>{m.push("/dashboard")},1e3)}r(t),i(a),s(!0),h(t)};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 hidden md:block",children:"Actions"}),(0,a.jsxs)("nav",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>u("update"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(y.dnK,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Update"})]}),(0,a.jsxs)("button",{onClick:()=>u("restart"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(y.WLu,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Restart"})]}),(0,a.jsxs)("button",{onClick:()=>u("shutdown"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(y.d7k,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Shutdown"})]})]}),(0,a.jsx)(k,{isOpen:e,onClose:()=>s(!1),title:n,steps:t,isCompleted:o})]})};let D=e=>{let{activeSection:s,setActiveSection:t}=e;return(0,a.jsx)("aside",{className:"md:w-64 w-20 bg-gray-800 text-white flex-shrink-0",children:(0,a.jsxs)("div",{className:"h-full flex flex-col justify-between p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 hidden md:block",children:"Navigation"}),(0,a.jsxs)("nav",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>t("node-monitor"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors ".concat("node-monitor"===s?"bg-gray-700":""),children:[(0,a.jsx)(y.NMh,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Node Monitor"})]}),(0,a.jsxs)("button",{onClick:()=>t("reth-logs"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors ".concat("reth-logs"===s?"bg-gray-700":""),children:[(0,a.jsx)(y.mGS,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Reth Logs"})]}),(0,a.jsxs)("button",{onClick:()=>t("lighthouse-logs"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors ".concat("lighthouse-logs"===s?"bg-gray-700":""),children:[(0,a.jsx)(y.mGS,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Lighthouse Logs"})]}),(0,a.jsxs)("button",{onClick:()=>t("terminal"),className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-700 transition-colors ".concat("terminal"===s?"bg-gray-700":""),children:[(0,a.jsx)(y.fF,{className:"text-lg"}),(0,a.jsx)("span",{className:"hidden md:block",children:"Terminal"})]})]})]}),(0,a.jsx)(E,{})]})})};var I=t(76865),T=t(98728),O=t(41671),L=t(76858),A=()=>{let[e,s]=(0,l.useState)("node-monitor"),[t,n]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{localStorage.getItem(c.Iy)&&n(!1)},[]),t)?(0,a.jsx)("div",{className:"min-h-screen bg-base-200 p-6",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"alert alert-warning mb-6",children:[(0,a.jsx)(I.Z,{className:"h-6 w-6"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Setup Incomplete"}),(0,a.jsx)("div",{className:"text-sm",children:"Your node setup process needs to be completed before accessing this section."})]})]}),(0,a.jsx)("div",{className:"card bg-base-100 shadow-xl",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-base-200 p-3 rounded-full",children:(0,a.jsx)(T.Z,{className:"h-8 w-8"})}),(0,a.jsx)("h2",{className:"card-title text-2xl",children:"Complete Your Node Setup"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"steps steps-vertical",children:[(0,a.jsx)("div",{className:"step step-primary",children:"Review Requirements"}),(0,a.jsx)("div",{className:"step",children:"Configure Node Settings"}),(0,a.jsx)("div",{className:"step",children:"Verify Connection"}),(0,a.jsx)("div",{className:"step",children:"Complete Setup"})]}),(0,a.jsxs)("div",{className:"bg-base-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Why is this important?"}),(0,a.jsxs)("ul",{className:"space-y-2 text-base-content/80",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 text-success"}),(0,a.jsx)("span",{children:"Ensures proper node configuration"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 text-success"}),(0,a.jsx)("span",{children:"Validates security settings"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 text-success"}),(0,a.jsx)("span",{children:"Optimizes performance"})]})]})]}),(0,a.jsx)("div",{className:"card-actions justify-end",children:(0,a.jsx)(r.default,{href:"/dashboard",children:(0,a.jsxs)("button",{className:"btn btn-primary gap-2",children:["Begin Setup",(0,a.jsx)(L.Z,{className:"h-4 w-4"})]})})})]})]})})]})}):(0,a.jsxs)("main",{className:"flex h-[calc(100vh-4rem)] bg-gray-100",children:[(0,a.jsx)(D,{activeSection:e,setActiveSection:s}),(0,a.jsx)(N,{activeSection:e})]})}},62755:function(e,s,t){"use strict";var a=t(57437);s.Z=e=>{let{step:s}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:(()=>{switch(s.status){case"pending":default:return"⏳";case"running":return(0,a.jsx)("span",{className:"loading loading-spinner loading-sm"});case"completed":return"✅";case"error":return"❌"}})()}),(0,a.jsx)("span",{className:"font-medium ".concat(s.skip?"text-base-content/50":""),children:s.description})]}),s.output&&(0,a.jsx)("pre",{className:"mt-2 p-2 bg-base-300 rounded-lg text-sm overflow-x-auto",children:s.output})]})}},15488:function(e,s,t){"use strict";t.d(s,{$H:function(){return c},Bm:function(){return n},Iy:function(){return r},Ko:function(){return i},LU:function(){return a},P0:function(){return o},s6:function(){return l}});let a="ssh_server_details",l="buidlguidlDirectory",r="buidlguidlSetupCompleted",n="setupProgress",c="ssh_remember_me",i="~/buidlguidl-client",o=async(e,s,t,a)=>{let l=e.replace("$DIRECTORY",s).replace("$ADDRESS",t||"").replace("$PASSWORD",a||"");try{let e=await fetch("/api/ssh/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:l})}),s=await e.json();if(s.error)throw Error(s.message||"Command execution failed");return s}catch(e){throw e}}}},function(e){e.O(0,[7699,2972,1591,2331,2971,2117,1744],function(){return e(e.s=19004)}),_N_E=e.O()}]);